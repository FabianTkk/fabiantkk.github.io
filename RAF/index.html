<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Registro de Asistencia a Facultad</title>
  <link href="https://cdn.jsdelivr.net/npm/tailwindcss@2.2.19/dist/tailwind.min.css" rel="stylesheet">
  <link rel="stylesheet" href="index.css">
  <script type="importmap">
    {
      "imports": {
        "@google/genai": "https://esm.sh/@google/genai@^0.7.0"
      }
    }
  </script>
  <link rel="stylesheet" href="/index.css">
  <style>
    /* Estilos para el modo oscuro */
    body.dark-mode {
      background-color: #1a1a1a;
      color: #e5e7eb;
    }
    
    body.dark-mode .container {
      background-color: #2d3748;
    }
    
    body.dark-mode .calendar-header {
      background-color: #4c51bf;
    }
    
    body.dark-mode #calendar-grid {
      background-color: #2d3748;
      color: #e5e7eb;
    }
    
    body.dark-mode .bg-gray-50 {
      background-color: #2d3748;
      color: #e5e7eb;
    }
    
    body.dark-mode .text-gray-600,
    body.dark-mode .text-gray-700 {
      color: #e5e7eb;
    }
    
    body.dark-mode .bg-green-500 {
      background-color: #38a169;
    }
    
    body.dark-mode .shadow-inner {
      box-shadow: inset 0 2px 4px 0 rgba(0, 0, 0, 0.3);
    }
    
    body.dark-mode .border-gray-200,
    body.dark-mode .border-gray-300 {
      border-color: #4a5568;
    }
    
    /* Bot√≥n modo oscuro */
    .theme-toggle {
      position: fixed;
      bottom: 20px;
      left: 20px;
      background: #f0f0f0;
      border: none;
      border-radius: 50px;
      padding: 10px 15px;
      cursor: pointer;
      display: flex;
      align-items: center;
      gap: 8px;
      font-weight: 500;
      box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
      transition: all 0.3s ease;
      z-index: 100;
    }
    
    body.dark-mode .theme-toggle {
      background: #4a5568;
      color: #ffffff;
      box-shadow: 0 2px 10px rgba(0, 0, 0, 0.3);
    }
    
    /* Transiciones suaves */
    body,
    .container,
    .calendar-header,
    #calendar-grid,
    .bg-gray-50 {
      transition: background-color 0.3s ease, color 0.3s ease, border-color 0.3s ease;
    }
  </style>
</head>
<body class="bg-gray-100 font-sans p-4 flex justify-center items-start min-h-screen print:bg-white">
  <!-- Bot√≥n de modo oscuro -->
  <button class="theme-toggle" id="themeToggle">
    <span>üåô</span> Modo Oscuro
  </button>

  <div class="container mx-auto max-w-3xl bg-white shadow-xl rounded-lg p-6 my-8 print:shadow-none print:my-0 print:p-4">
    <header class="mb-8 text-center">
      <h1 class="text-4xl font-bold text-indigo-600 print:text-2xl">Registro de Asistencia</h1>
      <p class="text-gray-600 print:text-sm">Controla tus d√≠as en la facultad y los viajes con tu compa√±era.</p>
    </header>

    <main class="grid grid-cols-1 md:grid-cols-5 gap-8 print:grid-cols-1 print:gap-4">
      <!-- Calendar Section -->
      <section class="md:col-span-3">
        <div class="calendar-header flex justify-between items-center mb-4 p-3 bg-indigo-500 text-white rounded-md shadow print:bg-transparent print:text-black print:p-0 print:mb-2">
          <button id="prev-month" aria-label="Mes anterior" class="px-4 py-2 rounded hover:bg-indigo-600 transition-colors print:hidden">&lt; Anterior</button>
          <h2 id="month-year" class="text-xl font-semibold print:text-lg"></h2>
          <button id="next-month" aria-label="Mes siguiente" class="px-4 py-2 rounded hover:bg-indigo-600 transition-colors print:hidden">Siguiente &gt;</button>
        </div>
        <div id="calendar-grid" class="grid grid-cols-7 gap-1 text-center bg-gray-50 p-2 rounded-md shadow-inner print:bg-transparent print:p-0 print:shadow-none print:border print:border-gray-300">
          <!-- Day headers (D, L, M, ...) will be generated by JS -->
          <!-- Date cells will be generated by JS -->
        </div>
      </section>

      <!-- Details and Cost Section -->
      <section class="md:col-span-2 space-y-6 print:space-y-4">
        <div class="p-4 bg-gray-50 rounded-lg shadow print:bg-transparent print:p-0 print:shadow-none print:border print:border-gray-200 print:px-2 print:py-1">
          <h3 class="text-lg font-semibold text-indigo-700 mb-3 border-b pb-2 print:text-base print:mb-1 print:pb-1">Detalles del D√≠a Seleccionado</h3>
          <p id="selected-day-display" class="text-gray-700 mb-3 h-6 print:text-sm print:h-auto">Ning√∫n d√≠a seleccionado</p>
          <div id="ride-options-container" class="hidden space-y-3 print:space-y-1">
            <label class="flex items-center space-x-2 text-gray-700 cursor-pointer hover:bg-indigo-50 p-2 rounded-md print:p-0 print:hover:bg-transparent">
              <input type="checkbox" id="ida-checkbox" class="form-checkbox h-5 w-5 text-indigo-600 rounded focus:ring-indigo-500 border-gray-300 print:h-4 print:w-4">
              <span class="print:text-sm">Ida con compa√±era ($6.000)</span>
            </label>
            <label class="flex items-center space-x-2 text-gray-700 cursor-pointer hover:bg-indigo-50 p-2 rounded-md print:p-0 print:hover:bg-transparent">
              <input type="checkbox" id="vuelta-checkbox" class="form-checkbox h-5 w-5 text-indigo-600 rounded focus:ring-indigo-500 border-gray-300 print:h-4 print:w-4">
              <span class="print:text-sm">Vuelta con compa√±era ($6.000)</span>
            </label>
            <p id="daily-cost" class="text-sm text-gray-500 pt-2 print:pt-1"></p>
          </div>
        </div>
        <div class="p-4 bg-green-500 text-white rounded-lg shadow-lg print:bg-green-100 print:text-green-800 print:p-2">
          <h3 class="text-xl font-bold mb-1 print:text-base">Total a Pagar:</h3>
          <p id="total-cost" class="text-3xl font-extrabold print:text-2xl" aria-live="polite">$0</p>
        </div>
        <div class="mt-6 text-center print:hidden">
            <button id="print-pdf-button" class="bg-blue-500 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded transition-colors shadow focus:outline-none focus:ring-2 focus:ring-blue-300">
                Imprimir Resumen (PDF)
            </button>
        </div>
      </section>
    </main>
     <footer class="text-center mt-8 text-sm text-gray-500 print:mt-4">
      <p>Hecho con ‚ù§Ô∏è para organizar los viajes a la facu.</p>
    </footer>
  </div>

  <script>
    // Script para el modo oscuro
    const themeToggle = document.getElementById('themeToggle');
    const body = document.body;
    
    // Verificar preferencia del sistema
    const prefersDark = window.matchMedia('(prefers-color-scheme: dark)').matches;
    
    // Verificar si hay una preferencia guardada
    const currentTheme = localStorage.getItem('theme');
    
    if (currentTheme === 'dark' || (!currentTheme && prefersDark)) {
        body.classList.add('dark-mode');
        themeToggle.innerHTML = '<span>‚òÄÔ∏è</span> Modo Claro';
    }
    
    themeToggle.addEventListener('click', () => {
        body.classList.toggle('dark-mode');
        
        if (body.classList.contains('dark-mode')) {
            localStorage.setItem('theme', 'dark');
            themeToggle.innerHTML = '<span>‚òÄÔ∏è</span> Modo Claro';
        } else {
            localStorage.setItem('theme', 'light');
            themeToggle.innerHTML = '<span>üåô</span> Modo Oscuro';
        }
    });
</script>

<script type="module" src="index.js"></script>
</body>
</html>